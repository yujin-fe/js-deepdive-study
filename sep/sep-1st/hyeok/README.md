# 변수 선언과 초기화, 할당

1. 소스 코드 평가와 런타임의 차이  
   1-1. 선언, 초기화, 할당이란?
2. 변수 선언 방식에 따른 초기화와 값 할당
3. 안전한 코드 작성

## 1. 소스 코드 평가와 런타임의 차이

JS는 기본적으로 **인터프리터** 언어이다.  
소스 코드를 **한 줄**씩 읽고 실행한다는 뜻이다.
하지만 실제로는 두 단계를 거친다.

먼저 소스 코드를 평가(해석)하여 실행 컨텍스트를 생성한 뒤에  
실제 코드 실행(런타임)에 들어선다.  
(평가 단계에서 이뤄지는 몇 가지 동작이 있지만 여기서는 변수에만 집중하겠습니다.)

JS엔진은 소스 코드에서 변수 선언문을 먼저 모두 실행한다.  
이때 값이 할당되는 것은 아니며 평가가 끝난 뒤,  
실제 런타임에 할당문을 만났을 때 비로소 할당이 진행된다. (초기화 유무는 선언 방식에 따라 다르다.)

즉 소스 코드를 평가해 런타임에 필요한 변수들을 모두 먼저 등록해두고,  
런타임에 할당문을 만나면 등록된 변수에 값을 할당한다.

### 선언, 초기화, 할당이란?

1. 선언

var, let, const 같은 키워드 + 식별자 이름으로 변수를 선언할 수 있다.  
이는 JS 엔진에 해당 식별자 이름의 변수를 사용하겠다고 알리는 것이며  
JS엔진은 해당 식별자를 변수명으로 등록한다.

2. 초기화

선언된 변수는 아직 할당받은 메모리가 없다.  
(var는 특수한 케이스라 이후 설명)  
초기화 단계에선 메모리 공간을 확보한 뒤 해당 메모리 공간을 변수와 연결한다.  
이 때 값을 바로 할당하지 않으면 undefined가 기본값으로 메모리에 할당된다.

여기까지가 평가단계에서 이뤄지는 일이며 할당은 런타임에 일어난다.

3. 런타임에 할당 연산자를 만나면 새로운 값을 변수에 새로운 메모리에 할당한다.  
   = 정확한 표현은 아니기에 추가 설명 필요

## 변수 선언 방식에 따른 초기화와 값 할당

### var

var로 변수를 선언하게 되면 평가 단계에서 바로 선언 + 초기화가 진행된다.  
이 때문에 var는 선언 단계에서부터 undefined라는 값을 지니게 되며  
이로 인해 호이스팅이 발생하게 된다.

런타임에 할당문을 만나기 전까지 계속해서 undefined라는 값으로 평가된다.

### let, const 공통점

let, const 모두 평가 단계에서 선언 단계까지만 실행되게 된다.  
런타임에 해당 선언문을 만났을 때 비로소 초기화가 실행된다.  
따라서 평가 이후 선언문을 만나기 전까지 let, const는 연결된 메모리 공간이 없고  
이로 인해 접근이 제한(이름만 존재하기 때문)된다.  
이것을 TDZ라고 부른다.

### let, const 차이점

let은 초기화와 값의 할당을 별도로 할 수 있다.

```js
let a;
console.log(a); // undefined
```

다음과 같은 형태로 사용이 가능하나,  
const의 경우 반드시 초기화와 값 할당이 동시에 이뤄져야한다.

```js
const a; // SyntaxError;
```

## 안전한 코드 작성

변수 선언 방식과 동작 원리를 이해하면 보다 안전한 코드 작성 습관을 가질 수 있다.  
안전한 코드 작성을 위해서는 var를 지양하고,  
const를 기본으로 사용하며, 값이 변하는 경우에만 let을 선택한다.  
또한 선언과 동시에 값을 초기화하는 습관을 들이면 예측 가능하고 안정적인 코드를 작성할 수 있다.
